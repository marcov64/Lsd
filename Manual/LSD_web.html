<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>LSD Manual</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;
	color:#254061;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:36.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-right:0cm;
	margin-left:0cm;
	text-align:center;
	font-size:18.0pt;
	font-family:"Arial",sans-serif;
	color:#254061;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
tt
	{font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria",serif;
	color:#365F91;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria",serif;
	color:#365F91;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria",serif;
	color:#243F60;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Segoe UI",sans-serif;}
p.msolistparagraphcxspfirst, li.msolistparagraphcxspfirst, div.msolistparagraphcxspfirst
	{mso-style-name:msolistparagraphcxspfirst;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.msolistparagraphcxspmiddle, li.msolistparagraphcxspmiddle, div.msolistparagraphcxspmiddle
	{mso-style-name:msolistparagraphcxspmiddle;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.msolistparagraphcxsplast, li.msolistparagraphcxsplast, div.msolistparagraphcxsplast
	{mso-style-name:msolistparagraphcxsplast;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0cm;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;}
span.Ttulo1Char
	{mso-style-name:"T\00EDtulo 1 Char";
	mso-style-link:"T\00EDtulo 1";
	font-family:"Arial",sans-serif;
	color:#254061;
	font-weight:bold;}
p.Ttulo1, li.Ttulo1, div.Ttulo1
	{mso-style-name:"T\00EDtulo 1";
	mso-style-link:"T\00EDtulo 1 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.Ttulo2Char
	{mso-style-name:"T\00EDtulo 2 Char";
	mso-style-link:"T\00EDtulo 2";
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.Ttulo2, li.Ttulo2, div.Ttulo2
	{mso-style-name:"T\00EDtulo 2";
	mso-style-link:"T\00EDtulo 2 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.Ttulo3Char
	{mso-style-name:"T\00EDtulo 3 Char";
	mso-style-link:"T\00EDtulo 3";
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.Ttulo3, li.Ttulo3, div.Ttulo3
	{mso-style-name:"T\00EDtulo 3";
	mso-style-link:"T\00EDtulo 3 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.TtuloChar
	{mso-style-name:"T\00EDtulo Char";
	mso-style-link:T\00EDtulo;
	font-family:"Arial",sans-serif;
	color:#254061;
	font-weight:bold;}
p.Ttulo, li.Ttulo, div.Ttulo
	{mso-style-name:T\00EDtulo;
	mso-style-link:"T\00EDtulo Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.TextodebaloChar
	{mso-style-name:"Texto de bal\00E3o Char";
	mso-style-link:"Texto de bal\00E3o";
	font-family:"Tahoma",sans-serif;}
p.Textodebalo, li.Textodebalo, div.Textodebalo
	{mso-style-name:"Texto de bal\00E3o";
	mso-style-link:"Texto de bal\00E3o Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial",sans-serif;}
span.Cdigo
	{mso-style-name:C\00F3digo;
	font-family:"Courier New";
	color:gray;}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 -->
</style>

<link rel=icon href="image/lsd.png">
<meta name=Author content="LSD - Laboratory for Simulation Development">

<iframe name=navbar src=navbar.html scrolling=no style='position:fixed;
 border-bottom-style:none;border-left-style:none;border-right-style:none;
 border-top-style:none;height:55px;left:0in;overflow:hidden;right:0in;
 top:0in;width:100%'>
</iframe>

</head>

<body lang=PT-BR link=blue vlink=purple style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoTitle><span lang=EN-US>&nbsp;</span></p>

<p class=MsoTitle><span lang=EN-US>LSD Web Interface</span></p>

<p><span lang=EN-US>The manual explains the configuration and the usage of the
LSD web interface (LWI). LWI allows LSD models to be operated using a standard
HTML web browser interface and to be available to users in the open internet,
without the need to install LSD in the users’ computers.</span></p>

<h1><span lang=EN-US>Table of contents </span></h1>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'><span lang=EN-US>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
class=MsoHyperlink><span lang=EN-US><a href="#_Introduction">Introduction</a></span></span><span
lang=EN-US> to what is the LSD Web Interface.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'><span lang=EN-US>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US><a href="#_Installation_of_LSD">Installation</a> of the LSD web
server.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'><span lang=EN-US>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US><a href="#_Customizing_the_LSD">Customizing</a> the LSD Web
Interface.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'><span lang=EN-US>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Configuring, running and analyzing results of LSD models <a
href="#_LSD_web_interface">using the web interface</a>.</span></p>

<p class=MsoListParagraph style='margin-left:32.2pt;text-indent:-18.0pt'><span
lang=EN-US>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US><a href="#_Technical_details_of">Technical details</a> of LSD Web
Interface operation.</span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Introduction"></a><span class=Ttulo1Char><span lang=EN-US>Introduction</span></span></h1>

<p><span lang=EN-US>This manual presents the user-friendly, web-based interface
to LSD (LWI). LWI makes a basic subset of the LSD tools available to web
browser users, allowing the configuration, execution, and analysis of results
produced by LSD models. <a href="#_LSD_web_interface">LWI user front-end</a> is
compatible with any computer platform equipped with a modern HTML5 browser and
can be made available in closed (intranet) or open (internet) networks. </span></p>

<p><span lang=EN-US>As a web interface to existing LSD models, LWI does not add
new functionalities to them. However, it allows a simplified access to LSD models
to users which lack the technical knowledge to operate the full LSD interface,
or use a platform (smartphone, tablet etc.) in which LSD is not available for
installation. LWI can be integrated to any HTML-based <a
href="#_Server_requirements">web server</a> platform. LWI, per se, does not
provide accounts or persistent storage to users, which can be provided by the
host web platform. </span></p>

<p><span lang=EN-US>LWI is NOT installed by the LSD installer. So, after
installing LSD, please download the source code at <a
href="https://github.com/marcov64/LSD">https://github.com/marcov64/LSD</a> and
copy the folder named </span><span class=Cdigo><span lang=EN-US>lwi</span></span><span
lang=EN-US> in the downloaded archive (.zip) to the same folder where you
installed LSD, making sure the entire subfolder structure below </span><span
class=Cdigo><span lang=EN-US>lwi</span></span><span lang=EN-US> is copied.</span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name=install></a><a name="_Installation_of_LSD"></a><a
name="_Installation_of_the"></a><span lang=EN-US>Installation of the LSD web
server</span></h1>

<p><span lang=EN-US>This manual presents the configuration of LSD Web Interface
(LWI) back-end (server setup) to provide the web-based interface to LSD models
to the end users. LWI web back-end is compatible with any web server platform
equipped with a modern HTTP server supporting PHP server scripting. In
principle any relatively recent Linux or Windows 64-bit server is adequate for
hosting LWI. </span></p>

<p><span lang=EN-US>This section of the manual is not intended to be a guide to
unexperienced server operators, as a minimum knowledge of server administration
is required. Some experience on operating in the command line is also a
pre-requisite.</span></p>

<p><span lang=EN-US>This section is organized in three subsections. Initially,
we describe the minimum hardware and software <a href="#_Server_requirements">requirements
for the server</a> environment. The second subsection presents the detailed
instructions to <a href="#_Server_setup">install and configure the server</a>.
Next, the <a href="#_Apache_and_PHP">web software configuration</a> is
explored. The fourth subsections details the <a href="#_LWI_installation_and">LWI
software installation</a>. Finally, the last section discusses some maintenance
issues associated with the <a href="#_Server_maintenance">operation of the LWI
server</a>.</span></p>

<h2><a name="_Server_requirements"></a><span lang=EN-US>Server requirements</span></h2>

<p><span lang=EN-US>The LWI server must be able to efficiently execute a
complex, computed intensive simulation process for each LWI user session
actively running a simulation (an “executing session”). Each LWI executing
session must get sufficient server resources to produce an adequate experience
to the end user. Such requirement defines the specification of the hardware
recommended for the server. On the software side, there are no strong
requirements on the server configuration, being both Linux and (modern) Windows
servers supported. Mac servers can be used only as a test platform but are not
supported. No additional special/proprietary software is strictly required by
LWI.</span></p>

<p><span lang=EN-US>LWI can be operated on any modern server platform. The
instructions below assume a 64-bit Intel/AMD server for convenience. Different
platforms would require a recompiled version of LWI executables (supported on
any platform with a GCC compiler available). LWI can be operated in production
servers, supporting multiple simultaneous users, but also in small-scale
test/development servers.</span></p>

<p><span lang=EN-US>LWI can be deployed on any web server supporting HTTP 1.1.
This includes Apache, Microsoft IIS and others. However, the recommended
(tested) configuration is based on Apache HTTP Server version 2.4, which is
available for Linux, Microsoft Windows and Apple macOS server platforms, among
others. For downloading the appropriate version of Apache, please visit <a
href="https://httpd.apache.org">https://httpd.apache.org</a>. </span></p>

<p><span lang=EN-US>Additionally, the LWI requires support to PHP version 7.4
(or newer), which is natively supported by both Apache and Microsoft IIS on
Linux and Windows servers. For downloading the appropriate version of PHP,
please visit <a href="http://php.net">http://php.net</a>. </span></p>

<p><span lang=EN-US>The LWI server typically operates on non-critical and
non-sensitive data. On top of that, there is no long-term data storage of user
data. Also, the level of user access to the server is minimal, exclusively done
through HTTP/HTTPS (web pages) and PHP (simulation configuration results
files). This should alleviate the security requirements when the server is used
exclusively for LWI.</span></p>

<h2><a name="_Server_setup"></a><span lang=EN-US>Server setup</span></h2>

<p><span lang=EN-US>We assume the basic operating system is installed using the
default installation options. The instructions require a server supporting a
bash-like shell, typically any Linux distribution or a recent Microsoft Windows
10+ version with the Windows Subsystem for Linux (WSL) installed. In the
instructions below Ubuntu 20.04 LTS and (now deprecated) CentOS 7.4 Linux
servers are used as examples but the installation steps can be adapted for
installation on any server platform and distribution.</span></p>

<p><span lang=EN-US>If a Linux server is selected, please install the server
software following the appropriate instructions for the selected distribution. </span></p>

<p><span lang=EN-US>If a Windows server is selected, please install the last version
of Microsoft Windows Server. Both Apache and PHP can be installed in Microsoft
Windows servers in two modes: native Windows or using the Windows Subsystem for
Linux (WSL). For the unification of the setup instructions, WSL mode is
preferred. However, the steps to setup using native mode are quite similar and
easily adaptable and should be the preferred approach in most cases. A regular
Windows 10 desktop (build 1709 or newer) may be used to deploy a test server
(small capacity) following the same instructions. Please enable WSL <i>before</i>
proceeding. To use WSL you must yet choose a Linux distribution. The examples
assume using the Ubuntu 20.04 WSL distribution.</span></p>

<p><span lang=EN-US>Some macOS computers (version 10.13 to 11) may come bundled
with pre-configured versions of Apache and PHP, but this changed in recent
macOS versions. macOS 12 (Monterey) and newer do not come with PHP installed.
As PHP is no longer supported by Apple, an alternative version of PHP and
Apache must be installed to use LWI (or just PHP if you can code sign it to
work with the built-in Apache). Using Homebrew version of Apache and PHP seems
to work, but we cannot ensure future macOS updates will not break this. The
required Homebrew package manager is automatically installed by the LSD
installer. If LSD installer was not previously run, please check <a
href="https://brew.sh">https://brew.sh</a> for instructions on installing
Homebrew <i>before</i> using the instructions below.</span></p>

<h2><a name="_Apache_and_PHP"></a><span lang=EN-US>Apache and PHP installation
and configuration</span></h2>

<p><span lang=EN-US>For Linux Ubuntu and Windows Ubuntu WSL servers, install
the required packages individually using the bash terminal:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo apt install apache2 php zip</span></span></p>

<p><span lang=EN-US>On Linux CentOS, the installation command is:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo yum install httpd php zip</span></span></p>

<p><span lang=EN-US>macOS servers already come with the packages installed.</span></p>

<p><span lang=EN-US>Next (re)start the web server. On Linux Ubuntu and Windows
Ubuntu WSL:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo service apache2 restart</span></span></p>

<p><span lang=EN-US>On Linux CentOS:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo systemctl start httpd.service</span></span></p>

<p><span class=Cdigo><span lang=EN-US>sudo systemctl enable httpd.service</span></span></p>

<p><a name="_LWI_installation_and"></a><span lang=EN-US>On macOS (up to version
11 Big Sur):</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo systemctl start httpd.service</span></span></p>

<p><span class=Cdigo><span lang=EN-US>sudo systemctl enable httpd.service</span></span></p>

<p><span lang=EN-US>On macOS (from version 12 Monterey, UNSUPPORTED):</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo launchctl unload -w
/System/Library/LaunchDaemons/org.apache.httpd.plist</span></span></p>

<p><span class=Cdigo><span lang=EN-US>brew install httpd php</span></span></p>

<p><span class=Cdigo><span lang=EN-US>brew services start httpd</span></span></p>

<h2><span lang=EN-US>LWI installation and configuration</span></h2>

<p><span lang=EN-US>Now we must install LWI files in the web server. LWI files
are stored in a single subdirectory tree, inside the directory used by the HTTP
server to host the website files. In the case of an Apache on Ubuntu
distributions (Linux and Windows WSL) or CentOS configuration, the HTTP server
directory for the website is </span><span class=Cdigo><span lang=EN-US>/var/www</span></span><span
lang=EN-US>. This location may be different according to the adopted
combination of HTTP server and operating system/distribution.</span></p>

<p><span lang=EN-US>Each LWI installation supports a single <a
href="LSD_faqs.html#model">LSD model</a> under a unique baseline <a
href="LSD_faqs.html#simsetting">configuration</a> (see <a
href="#_Customizing_the_LWI">below</a>). If different models or configurations
must be supported, it is necessary to configure multiple virtual web servers
(in a single physical server), installing one independent LWI instance
(different directory) for each virtual server. Please refer Apache documentation
on how to set up virtual web servers.</span></p>

<p><span lang=EN-US>To start, please copy the provided LWI subdirectory inside
your LSD installation directory (normally at </span><span class=Cdigo><span
lang=EN-US>~/LSD/lwi</span></span><span lang=EN-US>) to the appropriate web
server directory. On Ubuntu distributions (including Windows WSL) and CentOS
use the following terminal command:</span></p>

<p><span class=Cdigo>sudo cp -R ~/LSD/lwi /var/www/</span></p>

<p><span lang=EN-US>In macOS (up to version 11 Big Sur):</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo cp -R ~/LSD/lwi
/Library/WebServer/Documents/</span></span></p>

<p><span lang=EN-US>In macOS (from version 12 Monterey, UNSUPPORTED):</span></p>

<p><span class=Cdigo>cp -R ~/LSD/lwi /usr/local/var/www/</span></p>

<p><span lang=EN-GB>The structure of LWI subdirectory tree is the following:</span></p>

<p align=center style='text-align:center'><span lang=EN-US><img border=0
width=407 height=120 src="image/lwi_files.png"></span></p>

<p><span lang=EN-US>In </span><span class=Cdigo><span lang=EN-US>lwi</span></span><span
lang=EN-US> subdirectory are kept all PHP-only files (the ones not directly
accessed by the user browser), including executable and configuration files.
The </span><span class=Cdigo><span lang=EN-US>lwi/tmp</span></span><span
lang=EN-US> subdirectory holds session-related PHP server temporary files,
deleted periodically (check the Maintenance section). The </span><span
class=Cdigo><span lang=EN-US>lwi/public_html</span></span><span lang=EN-US>
subdirectory holds the files visible to the user browser. The </span><span
class=Cdigo><span lang=EN-US>lwi/public_html/tmp</span></span><span lang=EN-US>
subdirectory holds the session-related, temporary user files
(downloaded/uploaded simulation configurations and simulation results), also
deleted periodically. The user/group associated to the HTTP and the PHP server
(</span><span class=Cdigo><span lang=EN-US>www-data</span></span><span
lang=EN-US> in Ubuntu distributions, </span><span class=Cdigo><span lang=EN-US>apache</span></span><span
lang=EN-US> in CentOS, etc.) must have read-access to the entire </span><span
class=Cdigo><span lang=EN-US>lwi</span></span><span lang=EN-US> subdirectory
tree plus read-write access to <i>both</i> </span><span class=Cdigo><span
lang=EN-US>tmp</span></span><span lang=EN-US> subdirectories (the default
configuration).</span></p>

<p><span lang=EN-GB>The provided files must yet be set with all required file
permissions/ownership for a typical setup. Usually, it is enough to adjust the
ownership. For Ubuntu (including Windows WSL) use:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo chown -R www-data:www-data
/var/www/lwi<br>
sudo chmod g+w /var/www/lwi/tmp<br>
sudo chmod g+w /var/www/lwi/public_html/tmp</span></span></p>

<p><span lang=EN-US>For CentOS, because of SELinux, a longer setup is required:
</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo chown -R apache:apache /var/www/lwi<br>
sudo chmod g+w /var/www/lwi/tmp<br>
sudo chmod g+w /var/www/lwi/public_html/tmp<br>
sudo semanage fcontext -a -t httpd_sys_content_t &quot;/var/www/lwi(/.*)?&quot;<br>
sudo semanage fcontext -a -t httpd_sys_rw_content_t
&quot;/var/www/lwi/tmp(/.*)?&quot;<br>
sudo semanage fcontext -a -t httpd_sys_rw_content_t
&quot;/var/www/lwi/public_html/tmp(/.*)?&quot;<br>
sudo restorecon -F -R -v /var/www/lwi<br>
sudo setsebool -P httpd_builtin_scripting on<br>
sudo setsebool -P httpd_can_sendmail on<br>
sudo setsebool -P httpd_execmem on<br>
sudo setsebool -P httpd_ssi_exec on</span></span></p>

<p><span lang=EN-GB>For macOS</span><span lang=EN-US> (up to version 11 Big
Sur)</span><span lang=EN-GB>:</span></p>

<p><span class=Cdigo><span lang=EN-GB>sudo chown -R _www:_www
/Library/WebServer/Documents/lwi<br>
sudo chmod g+w /Library/WebServer/Documents/lwi/tmp<br>
sudo chmod g+w /Library/WebServer/Documents/lwi</span></span><span class=Cdigo><span
lang=EN-US>/public_html</span></span><span class=Cdigo><span lang=EN-GB>/tmp<br>
</span></span><span lang=EN-GB style='font-family:"Courier New";color:gray'>sudo
xattr -rd com.apple.quarantine <span class=Cdigo>/Library/WebServer/Documents</span>/lwi/*OSX</span></p>

<p><span lang=EN-GB>For macOS</span><span lang=EN-US> (from version 12
Monterey, UNSUPPORTED), replacing </span><span class=Cdigo>[YOURID]</span><span
lang=EN-US> by your short user ID</span><span lang=EN-GB>:</span></p>

<p><span class=Cdigo><span lang=EN-GB>chown -R [YOURID]:admin </span></span><span
class=Cdigo><span lang=EN-US>/usr/local/var/www/</span></span><span
class=Cdigo><span lang=EN-GB>lwi<br>
chmod g+w </span></span><span class=Cdigo><span lang=EN-US>/usr/local/var/www/</span></span><span
class=Cdigo><span lang=EN-GB>lwi/tmp<br>
chmod g+w </span></span><span class=Cdigo><span lang=EN-US>/usr/local/var/www/</span></span><span
class=Cdigo><span lang=EN-GB>lwi</span></span><span class=Cdigo><span
lang=EN-US>/public_html</span></span><span class=Cdigo><span lang=EN-GB>/tmp<br>
</span></span><span lang=EN-GB style='font-family:"Courier New";color:gray'>xattr
-rd com.apple.quarantine </span><span class=Cdigo><span lang=EN-US>/usr/local/var/www/</span></span><span
lang=EN-GB style='font-family:"Courier New";color:gray'>lwi/*OSX</span></p>

<p><span lang=EN-US>It is now necessary to configure the Apache web server to
use LWI as the web entry point (virtual web server). Use the following commands
to adjust the entry point in Ubuntu Linux and Windows WSL servers (replace </span><span
class=Cdigo><span lang=EN-US>000-default</span></span><span lang=EN-US> by the
name of your configuration, if changed from the installation default): </span></p>

<p><span class=Cdigo><span lang=EN-US>sudo cp /var/www/lwi/lwi.conf
/etc/apache2/sites-available<br>
sudo a2dissite 000-default<br>
sudo a2ensite lwi<br>
sudo service apache2 reload</span></span></p>

<p><span lang=EN-US>For CentOS, the command is:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo bash -c 'cat /var/www/lwi/vhost.conf
&gt;&gt; /etc/httpd/conf.d/vhost.conf'<br>
sudo systemctl restart httpd.service</span></span></p>

<p><span lang=EN-US>If you have a more complex server setup (more than one
virtual web server in a single domain, for instance), you may need to adjust
the files </span><span class=Cdigo><span lang=EN-US>lwi.conf</span></span><span
lang=EN-US> or </span><span class=Cdigo><span lang=EN-US>vhost.conf</span></span><span
lang=EN-US> to your needs.</span></p>

<p><span lang=EN-US>In macOS the setup is more complicated and depends on the
macOS version. The process involves editing the Apache webserver configuration
file in </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US> (text editor) to enable PHP, use LWI as the default website, and
other version-specific settings.</span></p>

<p><span lang=EN-GB>For macOS</span><span lang=EN-US> up to version 11 (Big
Sur)</span><span lang=EN-GB>:</span></p>

<p><span class=Cdigo><span lang=IT>sudo nano /etc/apache2/httpd.conf</span></span></p>

<p><span lang=EN-US>In </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US>, search (</span><span class=Cdigo><span lang=EN-US>CTRL+W</span></span><span
lang=EN-US>) for the line starting with </span><span class=Cdigo><span
lang=EN-US>#LoadModule php7_module</span></span><span lang=EN-US> and delete
the </span><span class=Cdigo><span lang=EN-US>#</span></span><span lang=EN-US>
character from it, uncommenting the line.</span></p>

<p><span lang=EN-US>Still in </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US>, search (</span><span class=Cdigo><span lang=EN-US>CTRL+W</span></span><span
lang=EN-US>) for the line containing </span><span class=Cdigo><span lang=EN-US>DocumentRoot
&quot;/Library/WebServer/Documents&quot;</span></span><span lang=EN-US> (or
another path) and replace it with:</span></p>

<p><span class=Cdigo><span lang=EN-US>DocumentRoot
&quot;/Library/WebServer/Documents/lwi/public_html&quot;</span></span></p>

<p><span lang=EN-US>Now find the line containing </span><span class=Cdigo><span
lang=EN-US>&lt;Directory &quot;/Library/WebServer/Documents&quot;&gt;</span></span><span
lang=EN-US> (or another path, should be below the previous one) and replace it
by:</span></p>

<p><span class=Cdigo><span lang=EN-US>&lt;Directory
&quot;/Library/WebServer/Documents/lwi/public_html&quot;&gt;</span></span></p>

<p><span lang=EN-US>Close </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US> saving the configuration and (</span><span class=Cdigo><span
lang=EN-US>CTRL+X</span></span><span lang=EN-US>, </span><span class=Cdigo><span
lang=EN-US>Y</span></span><span lang=EN-US>, </span><span class=Cdigo><span
lang=EN-US>ENTER</span></span><span lang=EN-US>). Finally, restart the
webserver so the new configuration is used:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo apachectl restart</span></span></p>

<p><span lang=EN-GB>In macOS</span><span lang=EN-US> from version 12 (Monterey,
UNSUPPORTED)</span><span lang=EN-GB>:</span></p>

<p><span class=Cdigo><span lang=IT>nano /usr/local/etc/httpd/httpd.conf</span></span></p>

<p><span lang=EN-US>In </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US>, search (</span><span class=Cdigo><span lang=EN-US>CTRL+W</span></span><span
lang=EN-US>) for the line containing </span><span class=Cdigo><span lang=EN-US>Listen
8080</span></span><span lang=EN-US> and change it to </span><span class=Cdigo><span
lang=EN-US>Listen 80</span></span><span lang=EN-US>.</span></p>

<p><span lang=EN-US>Still in </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US>, search (</span><span class=Cdigo><span lang=EN-US>CTRL+W</span></span><span
lang=EN-US>) for the line starting with </span><span class=Cdigo><span
lang=EN-US># LoadModule foo_module</span></span><span lang=EN-US>. Below it,
add the following new line:</span></p>

<p><span class=Cdigo><span lang=EN-US>LoadModule php_module
/usr/local/opt/php/lib/httpd/modules/libphp.so</span></span></p>

<p><span lang=EN-US>Next, in </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US>, look for the lines containing </span><span class=Cdigo><span
lang=EN-US>User _www</span></span><span lang=EN-US> and </span><span
class=Cdigo><span lang=EN-US>Group _www</span></span><span lang=EN-US>, and
modify them to (replace </span><span class=Cdigo><span lang=EN-US>[YOURID]</span></span><span
lang=EN-US> by your short user ID):</span></p>

<p><span class=Cdigo><span lang=EN-US>User [YOURID]<br>
Group admin</span></span></p>

<p><span lang=EN-US>Now, search for the line containing </span><span
class=Cdigo><span lang=EN-US>DocumentRoot &quot;</span></span><span lang=EN-US>
</span><span class=Cdigo><span lang=EN-US>/usr/local/var/www&quot;</span></span><span
lang=EN-US> (or another path) and replace it with:</span></p>

<p><span class=Cdigo><span lang=EN-US>DocumentRoot &quot;</span></span><span
lang=EN-US> </span><span class=Cdigo><span lang=EN-US>/usr/local/var/www/lwi/public_html&quot;</span></span></p>

<p><span lang=EN-US>Next, find the line containing </span><span class=Cdigo><span
lang=EN-US>&lt;Directory &quot;/usr/local/var/www&quot;&gt;</span></span><span
lang=EN-US> (or another path, should be below the previous one) and replace it
by:</span></p>

<p><span class=Cdigo><span lang=EN-US>&lt;Directory &quot;</span></span><span
lang=EN-US> </span><span class=Cdigo><span lang=EN-US>/usr/local/var/www/lwi/public_html&quot;&gt;</span></span></p>

<p><span lang=EN-US>Finally, at the end of the </span><span class=Cdigo><span
lang=EN-US>httpd.conf</span></span><span lang=EN-US> file add the lines:</span></p>

<p><span class=Cdigo><span lang=EN-US>&lt;FilesMatch .php&gt;<br>
    SetHandler application/x-httpd-php<br>
&lt;/FilesMatch&gt;</span></span></p>

<p><span lang=EN-US>Close </span><span class=Cdigo><span lang=EN-US>nano</span></span><span
lang=EN-US> saving the configuration and (</span><span class=Cdigo><span
lang=EN-US>CTRL+X</span></span><span lang=EN-US>, </span><span class=Cdigo><span
lang=EN-US>Y</span></span><span lang=EN-US>, </span><span class=Cdigo><span
lang=EN-US>ENTER</span></span><span lang=EN-US>). Finally, restart the
webserver so the new configuration is used:</span></p>

<p><span class=Cdigo><span lang=EN-US>brew services restart httpd</span></span></p>

<p><a name=openbrowser></a><span lang=EN-US>Your LWI server should be up and
running now. You can test it using a browser in the same machine using the
address </span><span class=Cdigo><span lang=EN-US>http://localhost</span></span><span
lang=EN-US>. You can also access the server from other machines connected in
the same local network by using the server IP address (or the DNS name, if you
have one assigned). To get the server IP address(es), type the command:</span></p>

<p><span class=Cdigo><span lang=EN-US>ifconfig | grep &quot;inet addr&quot;</span></span></p>

<p><span lang=EN-US>You can then access the server typing (one of) the IP
addresses in your browser (as in </span><span class=Cdigo><span lang=EN-US>http://192.168.1.152</span></span><span
lang=EN-US>, for example) in any machine connected in the same local network.</span></p>

<p><span lang=EN-US>Some servers may have the IP ports below 1024 unavailable
for non-system applications like Apache (and you can access the server only in
the same machine). This is a known limitation of Windows computers. In this
case, a port above 1024 (8080, for instance) must be used.</span></p>

<p><span lang=EN-US>LWI offers a link for the users to post messages to the
site administrator. To enable this functionality in a Linux environment, the </span><span
class=Cdigo><span lang=EN-US>sendmail</span></span><span lang=EN-US> package
(or a more recent equivalent, like </span><span class=Cdigo><span lang=EN-US>postfix</span></span><span
lang=EN-US>) must be configured in the server.</span></p>

<h2><a name="_Server_maintenance"></a><span lang=EN-US>Server maintenance</span></h2>

<p><span lang=EN-US>The LWI server usually requires no maintenance care if set
up properly. Except for the points discussed below, for all maintenance tasks
on the LWI server, like backups, software updating, security audits, storage
clean-up etc., please follow the usual (basic) standard web server guidelines.</span></p>

<p><span lang=EN-US>The only special maintenance task in a LWI server is to
manage temporary storage utilization. This is important as, per the default LWI
installation, over time the server may accumulate temporary files from the user
sessions. If nothing is done, the server may eventually run out of storage
space, even if at a slow pace. The LWI server accumulates temporary files in
just two subdirectories:</span></p>

<p><span class=Cdigo><span lang=EN-US>/var/www/lwi/tmp<br>
/var/www/lwi/public_html/tmp</span></span></p>

<p><span lang=EN-US>Those are paths on an Apache on Ubuntu or CentOS setup. For
other configurations please replace </span><span class=Cdigo><span lang=EN-US>/var/www</span></span><span
lang=EN-US> with the appropriate subdirectory.</span></p>

<p><span lang=EN-US>LWI temporary files are used/valid only while the
corresponding user sessions are active and cannot be retrieved by the users
after that. As PHP sessions are usually configured to last less than 24 hours
(the default is 24 minutes), it is recommended that files older than 2 days to be
permanently deleted. In most Linux configurations, the temporary file clean up
can be performed automatically using a </span><span class=Cdigo><span
lang=EN-US>cron</span></span><span lang=EN-US> job. Of course, other similar
tools can be used, in any platform. To configure a </span><span class=Cdigo><span
lang=EN-US>cron</span></span><span lang=EN-US> job, please first create the
following script file in the server and name it </span><span class=Cdigo><span
lang=EN-US>lwi-cleanup</span></span><span lang=EN-US>:</span></p>

<p><span class=Cdigo><span lang=EN-US>nano lwi-cleanup</span></span></p>

<p><span lang=EN-US>Enter the following lines and save the file in </span><span
class=Cdigo><span lang=EN-US>nano</span></span><span lang=EN-US> (</span><span
class=Cdigo><span lang=EN-US>CTRL+X</span></span><span lang=EN-US>, </span><span
class=Cdigo><span lang=EN-US>Y</span></span><span lang=EN-US>, </span><span
class=Cdigo><span lang=EN-US>ENTER</span></span><span lang=EN-US>):</span></p>

<p><span class=Cdigo><span lang=EN-US>#!/bin/sh<br>
find /var/www/lwi/tmp /var/www/lwi/public_html/tmp -type f -mtime +2 -delete</span></span></p>

<p><span lang=EN-US>Please adjust the directory paths to your particular
configuration, if needed.</span></p>

<p><span lang=EN-US>Then, make the script file executable using:</span></p>

<p><span class=Cdigo><span lang=EN-US>chmod a+x lwi-cleanup</span></span></p>

<p><span lang=EN-US>Finally, copy the script file to the </span><span
class=Cdigo><span lang=EN-US>cron</span></span><span lang=EN-US> daily
directory:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo cp lwi-cleanup /etc/cron.daily</span></span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Customizing_the_LSD"></a><a name=customize></a><span lang=EN-US>Customizing
the LSD Web Interface</span></h1>

<p class=MsoNormal><span lang=EN-US>The LSD Web Interface (LWI) can be
customized to any existing <a href="LSD_faqs.html#model">LSD model</a>. The
customization consists in <a href="#_Producing_the_baseline">(1)</a> producing
an adequate <a href="LSD_faqs.html#modelprogram">executable version</a> of the
model, together with a full baseline <a href="LSD_faqs.html#modelsetting">configuration</a>,
<a href="#_Selecting_the_Parameters">(2)</a> selecting which <a
href="LSD_faqs.html#parameter">Parameters</a> and <a
href="LSD_faqs.html#variable">Variable initial conditions</a> should be exposed
for the configuration by the user, as well the allowed value ranges, <a
href="#_Defining_the_Variables">(3)</a> defining for which <a
href="LSD_faqs.html#results">result Variables</a> the model’s output should be
presented to the user, <a href="#_Installing_the_new">(4)</a> installing the
produced configuration in the <a href="#_Installation_of_the">LWI server</a>,
and <a href="#_Customizing_the_LWI">(5)</a> customizing the LWI server for the
model. The customization is performed using standard LSD commands and
configuration files, as described below.</span></p>

<p class=MsoNormal><span lang=EN-US>The default configuration of LWI after the
installation of LSD brings the Schumpeterian Competition Model by Nelson &amp;
Winter (1983) (available in the </span><span class=Cdigo><span lang=EN-US>Example
Models</span></span><span lang=EN-US> group of the <a href="modelbrowser.html">LSD
Model Browser</a>, under </span><span class=Cdigo><span lang=EN-US>Literature
Models/nw2004</span></span><span lang=EN-US>). It is strongly recommended the
user test the LWI server configuration with this configuration <i>before</i>
trying to customize it to other models.</span></p>

<h2><a name="_Producing_the_baseline"></a><span lang=EN-US>Producing the
baseline simulation model executable</span></h2>

<p class=MsoNormal><span lang=EN-US>The first step is to produce a ‘No Window’
version of the <a href="LSD_faqs.html#modelprogram">LSD model program</a>. This
is an executable file named </span><span class=Cdigo><span lang=EN-US>lsdNW</span></span><span
lang=EN-US> (plus a </span><span class=Cdigo><span lang=EN-US>.exe</span></span><span
lang=EN-US> extension in Windows, or an </span><span class=Cdigo><span
lang=EN-US>x</span></span><span lang=EN-US> attribute in Linux/macOS) which
will be invoked by the <a href="#install">LWI server</a> every time a LWI user <a
href="#_Execution_section">starts a simulation</a>. The ‘No Window’ model
program can be generated in <a href="LMM.html">LMM</a>, by using the menu
command </span><span class=Cdigo><span lang=EN-US><a href="LMM.html#nowindow">Model&gt;Create
'No Window<span style='font-family:"Arial",sans-serif'> </span>' Version</a></span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Please note that the model program must be
generated in a computer using the same operating system version as the LWI
server (or in the server itself). If this is not possible (e.g., it is a
headless server), it is possible to compile the ‘No Window’ model program using
a terminal session in the server, see the instructions <a
href="LMM.html#nowindow">here</a>.</span></p>

<h2><span lang=EN-US>Selecting the Parameters and Variables to configure</span></h2>

<p class=MsoNormal><span lang=EN-US>The second step of making a <a
href="LSD_faqs.html#model">LSD simulation model</a> available for use with LWI
is to create a baseline <a href="LSD_faqs.html#modelsetting">configuration file</a>
(</span><span class=Cdigo><span lang=EN-US>.lsd</span></span><span lang=EN-US>
extension) and a limits-selection <a href="LSD_faqs.html#sa">sensitivity
analysis</a> file (</span><span class=Cdigo><span lang=EN-US>.sa</span></span><span
lang=EN-US> extension) using the <a href="browser.html">LSD Browser</a>. The
baseline configuration and the selection files are automatically loaded
whenever a LWI user <a href="#_Why_LSD?">starts a session</a> or <a
href="#_Configuration_page">reset it to the defaults</a>. </span></p>

<p class=MsoNormal><span lang=EN-US>The <a href="LSD_faqs.html#parameter">Parameters</a>
and <a href="LSD_faqs.html#variable">Variable initial conditions</a> which are
to be exposed for the LWI users to configure, and the respective lower-upper
limits, must be defined in the sensitivity analysis file (</span><span
class=Cdigo><span lang=EN-US>lwi.sa</span></span><span lang=EN-US>) using the <a
href="browser.html">LSD Browser</a>. Parameters and lagged Variables not
included in this file are not presented to the user and always assume the values
defined in the baseline configuration (</span><span class=Cdigo><span
lang=EN-US>lwi.lsd</span></span><span lang=EN-US>).</span></p>

<p class=MsoNormal><span lang=EN-US>To create the sensitivity analysis file,
first make sure the baseline configuration (</span><span class=Cdigo><span
lang=EN-US>lwi.lsd</span></span><span lang=EN-US>) is loaded in the LSD Browser
using the menu command </span><span class=Cdigo><span lang=EN-US><a
href="menufile.html#load">File&gt;Load</a></span></span><span lang=EN-US>.
Next, for each Parameter and lagged Variable to be included, select the desired
element in the <a href="browser.html#variables">LSD Browser list box</a>, and
choose command </span><span class=Cdigo><span lang=EN-US><a
href="browser.html#changeelement">Model&gt;Change Element</a></span></span><span
lang=EN-US>. Now, in the Change Element window, click on the </span><span
class=Cdigo><span lang=EN-US>Sensitivity</span></span><span lang=EN-US> button.
Finally, in the Sensitivity Analysis window, enter the minimum and the maximum
values for the Parameter or lagged Variable, separated by a space, select the </span><span
class=Cdigo><span lang=EN-US>Round to integer</span></span><span lang=EN-US>
option if the element is an integer number, and click on </span><span
class=Cdigo><span lang=EN-US>OK</span></span><span lang=EN-US>. Repeat this procedure
until all elements to be exposed to the user have their ranges defined. To see
the list of already selected elements, use the menu command </span><span
class=Cdigo><span lang=EN-US><a href="menurun.html#showsave">Run&gt;Show
Elements to&gt;Sensitivity Analysis</a></span></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>When all required Parameters and Variables
are set, save the sensitivity analysis file using the command </span><span
class=Cdigo><span lang=EN-US><a href="menufile.html">File&gt;Save Sensitivity</a></span></span><span
lang=EN-US>. The name of the saved file must be </span><span class=Cdigo><span
lang=EN-US>lwi.sa</span></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><a name="_Defining_the_Variables"></a><span lang=EN-US>Please
ensure that the chosen configuration is robust to multiple simulation runs,
using different <a href="menurun.html#simsetting">random number generator seeds</a>,
to avoid the <a href="#_LSD_web_interface">LWI user sessions</a> to crash. Save
your configuration file in the LSD Browser with the name </span><span
class=Cdigo><span lang=EN-US>lwi.lsd</span></span><span lang=EN-US>. using the
menu command </span><span class=Cdigo><span lang=EN-US><a
href="menufile.html#save">File&gt;Save As</a></span></span><span lang=EN-US>,
and the sensitivity analysis file, named </span><span class=Cdigo><span
lang=EN-US>lwi.sa</span></span><span lang=EN-US> with menu </span><span
class=Cdigo><a href="menufile.html#sa"><span lang=EN-US>File&gt;Save
Sensitivity</span></a></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Other than the regular model parameters, it
may be useful to set specific limits and description to the <a
href="LSD_faqs.html#modelsetting">simulation settings</a>. This may be
accomplished by adding to </span><span class=Cdigo><span lang=EN-US>lwi.lsd</span></span><span
lang=EN-US> and </span><span class=Cdigo><span lang=EN-US>lwi.sa</span></span><span
lang=EN-US> up to three (integer) meta-parameters. They are: </span><span
class=Cdigo><span lang=EN-US>_timeSteps_</span></span><span lang=EN-US>, the
number of simulation time steps, </span><span class=Cdigo><span lang=EN-US>_numRuns_</span></span><span
lang=EN-US>, the number of simulation runs, and </span><span class=Cdigo><span
lang=EN-US>_rndSeed_</span></span><span lang=EN-US>, the (initial) seed to the
pseudorandom number generator. If defined, the values for these meta-parameters
replace the configured and default ones, including the lower-upper limits and
descriptions.</span></p>

<h2><span lang=EN-US>Defining the Variables to present as results</span></h2>

<p class=MsoNormal><span lang=EN-US>The <a href="LSD_faqs.html#variable">Variables</a>’
time series which will be presented to the LWI users must be set to be saved in
the </span><span class=Cdigo><span lang=EN-US>lwi.lsd</span></span><span
lang=EN-US> <a href="LSD_faqs.html#modelsetting">configuration file</a>. All
time series regularly marked to be saved in the <a href="browser.html">LSD
Browser</a> are made available to the users. Select the desired Variable in the
<a href="browser.html#variables">LSD Browser list box</a> and use the menu
command </span><span class=Cdigo><span lang=EN-US><a
href="browser.html#changeelement">Model&gt;Change Element</a></span></span><span
lang=EN-US> to select the </span><span class=Cdigo><span lang=EN-US>Save</span></span><span
lang=EN-US> checkbox in the Change Element window.</span></p>

<p class=MsoNormal><span lang=EN-US>After selecting all Variables to be saved
and presented to the LWI users, save the baseline configuration under the name </span><span
class=Cdigo><span lang=EN-US>lwi.lsd</span></span><span lang=EN-US> using the
LSD Browser command </span><span class=Cdigo><span lang=EN-US><a
href="menufile.html#save">File&gt;Save As</a></span></span><span lang=EN-US>.</span></p>

<h2><a name="_Installing_the_new"></a><span lang=EN-US>Installing the new LWI
configuration</span></h2>

<p class=MsoNormal><span lang=EN-US>When all the required configuration files
are ready (</span><span class=Cdigo><span lang=EN-US>lwi.lsd</span></span><span
lang=EN-US>, </span><span class=Cdigo><span lang=EN-US>lwi.sa</span></span><span
lang=EN-US> and </span><span class=Cdigo><span lang=EN-US>lsdNW[.exe]</span></span><span
lang=EN-US>) in the <a href="LSD_faqs.html#modelhome">model home directory</a>,
copy them to the base subdirectory of LWI in the server. For Ubuntu,
Windows/WSL and CentOS, use the following terminal commands (see <a
href="#_LWI_installation_and">above</a> for details on the server directory
structure):</span></p>

<p class=MsoNormal><a name="_Selecting_the_Parameters"></a><span class=Cdigo><span
lang=EN-US>cd ~/Lsd/Work/[YOUR_MODEL_PATH]<br>
sudo cp lwi.lsd /var/www/lwi/<br>
sudo cp lwi.sa /var/www/lwi/<br>
sudo cp lsdNW /var/www/lwi/</span></span></p>

<p class=MsoNormal><span lang=EN-US>In macOS, the generated executable file (</span><span
class=Cdigo><span lang=EN-US>lsdNW</span></span><span lang=EN-US>) must also be
renamed to </span><span class=Cdigo><span lang=EN-US>lsdNWOSX</span></span><span
lang=EN-US> during the installation:</span></p>

<p class=MsoNormal><span class=Cdigo><span lang=EN-US>cd ~/Lsd/Work/[YOUR_MODEL_PATH]<br>
sudo cp lwi.lsd /Library/WebServer/Documents/lwi/<br>
sudo cp lwi.sa /Library/WebServer/Documents/lwi/<br>
sudo cp lsdNW /Library/WebServer/Documents/lwi/lsdNWOSX</span></span></p>

<p class=MsoNormal><span lang=EN-US>These three files will replace the previous
model and configuration used by LWI. Finally, reload the web server so it can
start using the new files. On Ubuntu and Windows/WSL use:</span></p>

<p class=MsoNormal><span class=Cdigo><span lang=EN-US>sudo service apache2
reload</span></span></p>

<p class=MsoNormal><span lang=EN-US>For CentOS:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo systemctl restart httpd.service</span></span></p>

<p class=MsoNormal><span lang=EN-US>For macOS:</span></p>

<p><span class=Cdigo><span lang=EN-US>sudo apachectl restart</span></span></p>

<p class=MsoNormal><a name="_Customizing_the_LWI"></a><span lang=EN-US>Launch
the browser in the appropriate address (see <a href="#openbrowser">here</a> for
details) and check the LWI operation for your model.</span></p>

<h2><a name="_Customizing_the_LWI_1"></a><span lang=EN-US>Customizing the LWI
web page</span></h2>

<p class=MsoNormal><span lang=EN-US>Almost everything in the LWI server can be
customized. However, other than basic personalization, changing the HTML/PHP
code require reasonable web programming skills, and should be unnecessary for
most applications.</span></p>

<p class=MsoNormal><span lang=EN-US>The main file to be customized in LWI is </span><span
class=Cdigo><span lang=EN-US>lwi/public_htnl/index.php</span></span><span
lang=EN-US>. Basic customization can be performed by changing <i>only</i> the
text marked between the special comment marks (starting with </span><span
class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ###</span></span><span lang=EN-US>).
The pre-set change points include adding:</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-US
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Name of the model, in three versions. A named
used in the browser tab:<br>
</span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD THE TAB NAME
OF YOUR MODEL HERE --&gt;</span></span><span lang=EN-US><br>
For large screen devices, the name used on the page heading is the one marked
by:<br>
 </span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD THE LONG
NAME OF YOUR MODEL HERE --&gt;</span></span><span lang=EN-US><br>
For narrow screen devices, also change the text following:<br>
</span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD THE SHORT
NAME OF YOUR MODEL HERE --&gt;</span></span><span lang=EN-US>.</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-US
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Welcome message. Several lines of (HTML
formatted) text can be added following the mark (the existing message can be
removed):<br>
</span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD YOUR WELCOME
MESSAGE HERE --&gt;</span></span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-US
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Copyright link. Add a website and a name for the
holder of the copyright after the mark:<br>
</span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD YOUR
COPYRIGHT LINK HERE --&gt;</span></span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span class=Cdigo><span
style='font-family:Symbol;color:windowtext'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span lang=EN-US>Copyright and no-warranties messages.
Define your copyright conditions and limit responsibilities following the mark:<br>
</span><span class=Cdigo><span lang=EN-US>&lt;!-- ### LWI ### ADD YOUR
COPYRIGHT AND WARRANTY MESSAGES HERE --&gt;</span></span></p>

<p class=MsoNormal><span lang=EN-US>Be careful on not changing the contents
outside the comment-mark regions. </span></p>

<p class=MsoNormal><span lang=EN-US>Another relevant file is </span><span
class=Cdigo><span lang=EN-US>lwi/defaults.php</span></span><span lang=EN-US>.
It contains several server parameters which may require changes for specific
applications. The default values are adequate only for small, dedicated
servers. E-mail addresses for the Contact panel are also adjusted in this file.
See more details <a href="#_Technical_configuration_of">below</a>.</span></p>

<p class=MsoNormal><span lang=EN-US>Please reload the web server after any
change (follow the instructions <a href="#_Installing_the_new">above</a>).</span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_LSD_web_interface"></a><a name=use></a><span class=Ttulo1Char><span
lang=EN-US>LSD Web Interface usage</span></span></h1>

<p><span lang=EN-US>LSD Web Interface (LWI) requires that users are at least
familiar with the model being used. The user is supposed to have at least some
basic knowledge of the model structure and its main parameters and variables to
fully profit from LWI. All names used in LSD for the model’s parameters and
variables are preserved in LWI.</span></p>

<p><span lang=EN-GB>This section is organized in five subsections, mirroring
LWI software organization. Initially, we introduce LWI <a
href="#_Navigation_Panel">Navigation panel</a> and how to select the desired
operating mode (or page). The second subsection presents the <a
href="#_Configuration_page">Configuration area</a> and how to set-up the
parameter values available to the user and the management of user’s custom
configurations to/from local storage. Subsection three explains the usage of
the <a href="#_Execution_section">Execution area</a> which allows the user to
control a simulation run and provides status about the execution. The fourth
subsection covers the <a href="#_Analysis_area">Analysis area</a> which offers
options to generate data tables and graphical plots from the simulation
results. Finally, the last section presents the <a href="#_Export_page">data
export area</a> which allows the user to download the produced results time
series.</span></p>

<h2><a name="_Why_LSD?"></a><a name="_Navigation_Panel"></a><span lang=EN-US>Navigation
panel</span></h2>

<p class=MsoNormal><span lang=EN-US>LWI is organized in several interaction
areas or “cards”, which can be scrolled or directly reached using the
Navigation panel. When initiating a new LWI session, the Navigation Panel is
presented together with the Welcome area. In devices with a narrow screen, like
smartphones, the user has to click in the “</span><span style='font-family:
"MS Gothic"'>&#9776;</span><span lang=EN-US>” symbol to open the Navigation
panel.</span></p>

<p class=MsoNormal><span lang=EN-US>The options in the Navigation panel
correspond to the four main LWI areas, presented below, plus the </span><span
class=Cdigo><span lang=EN-US>Welcome</span></span><span lang=EN-US>, </span><span
class=Cdigo><span lang=EN-US>Reset</span></span><span lang=EN-US>, </span><span
class=Cdigo><span lang=EN-US>Help</span></span><span lang=EN-US> and </span><span
class=Cdigo><span lang=EN-US>Contact</span></span><span lang=EN-US> areas. User
can switch sections by simply clicking in the name of the desired section in
the navigation panel or by scrolling the interface.</span></p>

<p class=MsoNormal><span lang=EN-US>The </span><span class=Cdigo><span
lang=EN-US>Reset</span></span><span lang=EN-US> page offers a command to
discard any changes made by the user, including configurations, running
simulations or results data, and initiates a new LWI session. All configuration
values previously entered by the user are lost. Any executing simulation is
aborted and the results, lost.</span></p>

<p class=MsoNormal><span lang=EN-US>The </span><span class=Cdigo><span
lang=EN-US>Help</span></span><span lang=EN-US> page presents a summary of this
manual.</span></p>

<p class=MsoNormal><span lang=EN-US>The </span><span class=Cdigo><span
lang=EN-US>Contact</span></span><span lang=EN-US> page offers a channel between
the user and the LSD web server administrator.</span></p>

<h2><a name="_Configuration_page"></a><a name="_Configuration_area"></a><span
lang=EN-US>Configuration area</span></h2>

<p class=MsoNormal><span lang=EN-US>The Configuration area allows the user to
control many of its parameters, initial conditions, and general simulation
settings. Each set of values to all the required parameters, initial conditions
and simulation settings is defined as one <i>model configuration</i>. Every
time the user initiates a new LWI session, the default model configuration is
automatically loaded. From the Configuration page, the user can change any
value, load a saved configuration, or save the current configuration to her
device.</span></p>

<p class=MsoNormal><span lang=EN-US>Configuration values can be of two types:
real (floating point) or integer numbers. All values have predefined ranges
(maximum and minimums or a set of options) and the user is not allowed to input
values outside these ranges (an error message is produced). Below you have a
description of the available configuration options. Please note that not all
combinations of configuration values may be adequate for the proper model
operation. If unexpected results are obtained after changing several values at
once, please try to restore some of them to the default configuration (by
pressing the Reset button besides any changed value) and execute the simulation
again.</span></p>

<p class=MsoNormal><span lang=EN-US>The Configuration area is divided in two
areas: the configurable item list, divided in two groups, and the command
buttons. Model parameters are predefined and fixed values that are used to
compute the model equations and define initial conditions to some variables.
For instance, the user can change parameters to modify simulated agent’s
behavioral rules or the applicable market rules. Simulation settings are values
defining the execution of the simulation model. </span></p>

<p class=MsoNormal><span lang=EN-US>At any moment, the user has the option to
download the current model configuration. The downloaded configuration is saved
to the user’s computer disk/storage as it is not possible to save it in the LWI
server. It is important to regularly save any changes made to the default
configuration, as any unsaved information is irreversibly lost whenever the
user session expires or is reset (by clicking on </span><span class=Cdigo><span
lang=EN-US>Reset Session</span></span><span lang=EN-US> in the Reset section or
closing the user browser). To download the current configuration, simply click
on </span><span class=Cdigo><span lang=EN-US>Download</span></span><span
lang=EN-US> in the Configuration area. Depending on the browser used, a dialog
window may open, asking for the destination of the configuration file to be
downloaded. Configuration files have the “.csv” extension (comma-separated text
file).</span></p>

<p class=MsoNormal><span lang=EN-US>Any existing configuration file, previously
saved using the </span><span class=Cdigo><span lang=EN-US>Download</span></span><span
lang=EN-US> option, can be loaded at any time, by clicking on </span><span
class=Cdigo><span lang=EN-US>Upload</span></span><span lang=EN-US>. A dialog
window will ask for the file containing the saved configuration, with the
“.csv” extension.</span></p>

<p class=MsoNormal><span lang=EN-US>Clicking on </span><span class=Cdigo><span
lang=EN-US>Reset All</span></span><span lang=EN-US> button replaces the current
configuration values with the default ones. Be careful to use it if you have
configuration changes to be saved, as the existing values are lost. If
required, click on </span><span class=Cdigo><span lang=EN-US>Download</span></span><span
lang=EN-US> before using this option.</span></p>

<h2><a name="_Execution_section"></a><a name="_Execution_area"></a><span
lang=EN-US>Execution area</span></h2>

<p class=MsoNormal><span lang=EN-US>The Execution area controls the execution
of the simulation model in the LWI server. Model execution can take from a few
seconds to several minutes, according to the selected configuration, in
particular the chosen number of simulation time steps. The Execution area is
divided in two subareas: the Status box and the command buttons.</span></p>

<p class=MsoNormal><span lang=EN-US>The command buttons control the simulation
model execution at the remote server. As soon as the user finishes the
configuration of the model in the <a href="#_Configuration_area">Configuration
area</a>, it is possible to start the execution by clicking on </span><span
class=Cdigo><span lang=EN-US>Start</span></span><span lang=EN-US>. At any time,
the user may interrupt the simulation by clicking on the </span><span
class=Cdigo><span lang=EN-US>Abort</span></span><span lang=EN-US> button.
Stopping the execution before the Status box shows </span><span class=Cdigo><span
lang=EN-US>Simulation completed</span></span><span lang=EN-US> aborts the
simulation and no data is saved for analysis. </span></p>

<p class=MsoNormal><span lang=EN-US>While the execution is going on, </span><span
class=Cdigo><span lang=EN-US>Simulation running</span></span><span lang=EN-US>
is show in the Status box, together with the elapsed time. User can execute
only one simulation instance at a time. If there is any error preventing the
simulation execution to complete, the status box will show </span><span
class=Cdigo><span lang=EN-US>Simulation error</span></span><span lang=EN-US>,
the execution will be aborted, and no data is saved for analysis. User can
click on the </span><span class=Cdigo><span lang=EN-US>Log</span></span><span
lang=EN-US> button to check the causes of the failure.</span></p>

<h2><a name="_Analysis_area"></a><span lang=EN-US>Analysis area</span></h2>

<p class=MsoNormal><span lang=EN-US>After the execution of the simulation
model, the Status box in the <a href="#_Execution_area">Execution area</a> will
show </span><span class=Cdigo><span lang=EN-US>Simulation run complete</span></span><span
lang=EN-US>, and the produced time series will be available for analysis in the
Analysis area. The area is composed by the time series list, the option
selectors, and the command buttons. Please make sure your browser is configured
to allow the LWI website to open new browser windows/tabs when using the
commands in this area.</span></p>

<p class=MsoNormal><span lang=EN-US>The user can select one or more items in
the time series list to be used when the command buttons are clicked. Clicking
once selects the time series and an additional click unselects it. </span></p>

<p class=MsoNormal><span lang=EN-US>By default, the commands in the Analysis
page operate over all simulation time steps, from </span><span class=Cdigo><span
lang=EN-US>t = 1</span></span><span lang=EN-US> to the number of time steps
defined in the <a href="#_Configuration_page">Configuration area</a>. The user
has the option to restrict the range of time steps to use in the analysis, by
changing the default values in the Selected Time Steps box.</span></p>

<p class=MsoNormal><span lang=EN-US>The Scale box provide configuration to the
scaling of the vertical axis of time series plots. The </span><span
class=Cdigo><span lang=EN-US>Auto</span></span><span lang=EN-US> option uses
auto scaling to plot the entire data range present in the series. The </span><span
class=Cdigo><span lang=EN-US>Manual</span></span><span lang=EN-US> option
allows the user to select the minimum and maximum values for the vertical axis
plot. The </span><span class=Cdigo><span lang=EN-US>Log</span></span><span
lang=EN-US> option uses a logarithmic scale (natural base) for the vertical
plot axis, descriptive statistics and data table, instead of a linear one (</span><span
class=Cdigo><span lang=EN-US>Linear</span></span><span lang=EN-US> option).</span></p>

<p class=MsoNormal><span lang=EN-US>The MC-band options provide extra
information for multi-run simulation plots. MC-bands are only available when </span><span
class=Cdigo><span lang=EN-US>numRuns</span></span><span lang=EN-US>, in
Configuration section, is set to more than one run (at least 10 runs are
recommended for sensible results). The </span><span class=Cdigo><span
lang=EN-US>Confidence</span></span><span lang=EN-US> option add a standard 95%
confidence interval band to each series selected to plot. The </span><span
class=Cdigo><span lang=EN-US>Max-min</span></span><span lang=EN-US> option a
band from the minimum to the maximum values obtained in the set of simulation
runs.</span></p>

<p class=MsoNormal><span lang=EN-US>Clicking on </span><span class=Cdigo><span
lang=EN-US>Statistics</span></span><span lang=EN-US> button creates a new
browser window showing some descriptive statistics for the selected time
series, including the mean, the standard deviation, the minimum and maximum
values, the number of observations, and the Monte Carlo standard error (when
the number of simulation runs is larger than one). If </span><span class=Cdigo><span
lang=EN-US>Log</span></span><span lang=EN-US> is selected, log values (natural
base) are used in computations. </span></p>

<p class=MsoNormal><span lang=EN-US>Clicking on </span><span class=Cdigo><span
lang=EN-US>Data</span></span><span lang=EN-US> button creates a new browser
window containing a table with the selected time series in the columns and the
time step values in the rows. If </span><span class=Cdigo><span lang=EN-US>Log</span></span><span
lang=EN-US> is selected, log values (natural base) are presented. At least one
and up to 15 series can be selected at a time. However, multiple data windows
may be open at any time.</span></p>

<p class=MsoNormal><span lang=EN-US>Clicking on </span><span class=Cdigo><span
lang=EN-US>Plot</span></span><span lang=EN-US> button creates a new browser
window with the selected time series plots. The horizontal axis represents the
simulation time steps and the vertical axis, the selected series values. At
least one and up to 15 series can be selected at a time. Multiple plot windows
may be open at a time.</span></p>

<h2><a name="_Export_page"></a><span lang=EN-US>Export area</span></h2>

<p class=MsoNormal><span lang=EN-US>After an LSD simulation is successfully
executed, the user can download the entire results data as (compressed) text
file(s) in CSV (comma-separated values) format. This file can be directly
imported in any numerical analysis software, like spreadsheets or statistical
packages. The Export area is composed by the Information boxes and the command
buttons. The information boxes summarize the details about the available data
which can be downloaded.</span></p>

<p class=MsoNormal><span lang=EN-US>As soon as the simulation execution is
finished, the results data file can be downloaded to the user’s computer
disk/storage. It is not possible to permanently save simulation results in the
LWI server, so it is important to save relevant results before they are
irreversibly lost whenever the user session expires or is reset (by clicking on
</span><span class=Cdigo><span lang=EN-US>Reset Session</span></span><span
lang=EN-US> in the Reset area or closing the browser). To download the
available results, simply click on </span><span class=Cdigo><span lang=EN-US>Download</span></span><span
lang=EN-US>. A dialog window may open, depending on the browser used, asking
for the destination of the data file. Results files have the </span><span
class=Cdigo><span lang=EN-US>.csv</span></span><span lang=EN-US> extension by
default and may be grouped inside a single compressed file with </span><span
class=Cdigo><span lang=EN-US>.zip</span></span><span lang=EN-US> extension.</span></p>

<p class=MsoNormal><span lang=EN-US>LWI results data files are comma-separated
values text files (CSV format). Columns contain single variables while lines
represent variables values at each time step. However, the first line has a
special meaning, being the first time step values located in the second line
and so on. The first line contains the columns headers with the names of the
variables in each column.</span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Technical_details_of"></a><span class=Ttulo1Char><span
lang=EN-US>Technical details of LSD Web Interface operation</span></span></h1>

<h2><a name="_LWI_workflow"></a><span lang=EN-US>LWI workflow</span></h2>

<p class=MsoNormal><span lang=EN-US>LWI is a (mostly) PHP interface between an
HTML web page and an LSD model executable program. LWI operation workflow can
be described as a set of ordered actions:</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>LWI loads from a configuration file (default: </span><span
class=Cdigo><span lang=EN-US>lwi/lwi.lsd</span></span><span lang=EN-US>) the
names of the parameters and initial conditions the modeler wants to offer for
configuration at the LWI web page, and the names of output variables should be
available to the user after the simulation is run. The same file includes the
default/initial values of the parameters and initial conditions, and the
textual description for parameters, initial conditions and output variables.
This file has an LSD specific format and must be generated by the <a
href="browser.html">LSD Browser</a>, as described in LSD documentation.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>LWI loads from a sensitivity analysis file (default: </span><span
class=Cdigo><span lang=EN-US>lwi/lwi.sa</span></span><span lang=EN-US>) the
numerical limits (range) for each of the parameters and initial conditions
contained in the configuration file. This file has an LSD specific format and
must be also generated by the LSD Browser, as described in LSD documentation.
Just two sensitivity values are required for each parameter/initial condition,
if more are provided, only the first two are used. It is also possible to
define parameters and initial conditions which accept only integer values
(default is to allow real numbers).</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Using the file </span><span class=Cdigo><span lang=EN-US>lwi/public_html/index.html</span></span><span
lang=EN-US>, LWI builds the model web page, offering an interface to the user
modify the default values for parameters and initial conditions, under the
defined range and integer/real restrictions for each one. This file can be
customized to show the appropriate titles and text for each model as described <a
href="#_Customizing_the_LWI_1">above</a>. Be careful when changing this file
and make changes only to the marked regions.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>After the user select the desired parameters and initial conditions,
and ask the simulation to be started, LWI generates a comma-separated file
(CSV, </span><span class=Cdigo><span lang=EN-US>.csv</span></span><span
lang=EN-US> extension) containing the values chosen by the users. This is a
text file with two columns, separated by a comma, and a first-line header
(spaces must be ignored). First column has the parameter/initial condition
name, and the second, the value set by the user. In the preconfigured Nelson
&amp; Winter model (N&amp;W) example, if the user makes no change to the
default values, the CSV configuration file content is (spaces added for
clarity):</span></p>

<p class=MsoNormal style='margin-left:35.45pt'><span class=Cdigo><span
lang=EN-US>Name,               Value<br>
Regime_imi,         1<br>
Regime_inno,        1<br>
Regime_restraint,   0<br>
Regime_fission,     0<br>
Bank,               0<br>
Dem_Coeff,          67<br>
Dem_elast,          1<br>
Inn_stddev,         0.01<br>
Dep_rate,           0.03<br>
Fiss,               0.01<br>
_timeSteps_,        1000<br>
_numRuns_,          100<br>
_rndSeed_,          1</span></span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US>LWI converts the CSV configuration file to the native
LSD format, and launches the model executable, passing the appropriate
configuration file to it. The final LSD configuration file name has the format </span><span
class=Cdigo><span lang=EN-US>run-XXXXXX.lsd</span></span><span lang=EN-US>,
where </span><span class=Cdigo><span lang=EN-US>XXXXXX</span></span><span
lang=EN-US> is a random suffix associated with the current user session at the
web server.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>During model execution, LWI redirects any output (</span><span
class=Cdigo><span lang=EN-US>stdout</span></span><span lang=EN-US>/</span><span
class=Cdigo><span lang=EN-US>stderr</span></span><span lang=EN-US>) from the
model executable to a text log file </span><span class=Cdigo><span lang=EN-US>named
run-XXXXXX.log</span></span><span lang=EN-US> in the default output folder. The
content of this file is available in the web interface to the user when
clicking the button </span><span class=Cdigo><span lang=EN-US>Log</span></span><span
lang=EN-US>.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>When the model executable finishes the simulation, it must save the
results as one or more CSV results files (</span><span class=Cdigo><span
lang=EN-US>.csv</span></span><span lang=EN-US> extension), one file per Monte
Carlo (MC) run (as per the </span><span class=Cdigo><span lang=EN-US>_numRuns_</span></span><span
lang=EN-US> meta-parameter). These files are saved to the default output path.
The results files are named as the configuration file plus a </span><span
class=Cdigo><span lang=EN-US>_Y</span></span><span lang=EN-US> suffix, where </span><span
class=Cdigo><span lang=EN-US>Y</span></span><span lang=EN-US> is the number of
the MC run (</span><span class=Cdigo><span lang=EN-US>Y = 1, ..., _numRuns_</span></span><span
lang=EN-US>). So, the results file names have the format </span><span
class=Cdigo><span lang=EN-US>run-XXXXXX_Y.csv</span></span><span lang=EN-US>,
where </span><span class=Cdigo><span lang=EN-US>XXXXXX</span></span><span
lang=EN-US> is the same suffix as in the configuration file. Data is organized
into columns, one per output variable, and rows, one per time step starting
from the first one. A first line header, with the variable names, is also
required. In the N&amp;W example, one of the (100) output files look like (just
first columns/rows shown, spaces added for clarity):</span></p>

<p class=MsoNormal style='margin-left:35.45pt'><span class=Cdigo>InvHerf,       
HP_index,       A_Mean,         A_Var,          ...<br>
16,             1.11E-16,       0.16,           0,              ...<br>
15.98331152,    0.024193314,    0.16281849,     2.77E-05,       ...<br>
15.97216525,    0.021439082,    0.165433691,    3.81E-05,       ...<br>
</span><span class=Cdigo><span lang=EN-US>15.96389477,    0.009739913,   
0.166184849,    3.57E-05,       ...<br>
15.95129457,    0.008758251,    0.166610406,    3.82E-05,       ...<br>
15.91051394,    0.026615029,    0.16949527,     7.70E-05,       ...<br>
15.86399764,    0.02119951,     0.171245262,    0.000117196,    ...<br>
15.80211593,    0.029093788,    0.174914063,    0.000159345,    ...<br>
.               .               .               .<br>
.               .               .               .<br>
.               .               .               .</span></span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>After the model executable finishes, LWI reads all the produced
results files, looking for the output variables marked for saving in the
original LSD configuration file (default: </span><span class=Cdigo><span
lang=EN-US>lwi/lwi.lsd</span></span><span lang=EN-US>).</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>When user selects output variables to be shown at the web page, LWI
uses the data read from the results files to present the results in the
requested format. When more than one results file exists, MC aggregation (mean,
median, confidence interval, max/min) is automatically done by LWI from the
from the set of output files.</span></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span lang=EN-US>10.<span
style='font:7.0pt "Times New Roman"'> </span></span><span lang=EN-US>When user
selects to download the produced output variable data, LWI creates a zipped
archive containing the produced output files, if more than one exists.</span></p>

<h2><a name="_Technical_configuration_of"></a><span lang=EN-US>Technical
configuration of LWI</span></h2>

<p class=MsoNormal><span lang=EN-US>The file </span><span class=Cdigo><span
lang=EN-US>lwi/defaults.php</span></span><span lang=EN-US> (at LWI base folder)
contains all the default values that may be adjusted to particular web server
configurations. Instead of changing this file directly, it is recommended to
create a text file named </span><span class=Cdigo><span lang=EN-US>lwi/my_defaults.php</span></span><span
lang=EN-US> (at the same base folder) and redefine the required variables
there. This way changes are not overwritten in case of LWI updates.</span></p>

<p class=MsoNormal><span lang=EN-US>As this is an embedded PHP file, please
note that the </span><span class=Cdigo><span lang=EN-US>my_defaults.php</span></span><span
lang=EN-US> file <i>must</i> begin with the line:</span></p>

<p class=MsoNormal><span class=Cdigo><span lang=EN-US>&lt;?php</span></span></p>

<h2><span lang=EN-US>Configuring non-LSD executables</span></h2>

<p class=MsoNormal><span lang=EN-US>By default, LWI assumes a no-window LSD
executable as the model program. Despite not supported, it is possible to use
any command-line model executable with LWI. However, the model executable must
be able to receive its configuration as a CSV file like the one shown in item 4
to produce its output as a (set of) properly named CSV file(s), as described in
item 7 <a href="#_LWI_workflow">above</a>.</span></p>

<p class=MsoNormal><span lang=EN-US>If a non-LSD executable is to be used, some
of the default settings of LWI <i>must</i> be changed. To do so, create a text
file named </span><span class=Cdigo><span lang=EN-US>my_defaults.php</span></span><span
lang=EN-US> at the base LWI folder (the one set at the web server!) and add the
following lines to it:</span></p>

<p class=MsoNormal><span class=Cdigo><span lang=EN-US>&lt;?php<br>
$lsd_exec = &quot;../NAME_OF_YOUR_EXECUTABLE&quot;;<br>
$csv_exec_config = true;</span></span></p>

<p class=MsoNormal><span lang=EN-US>The second line defines the name of your model
executable file, <i>without</i> OS-dependent suffixes or spaces in the name.
When run in a Windows web server, the executable file is automatically assumed
to have the </span><span class=Cdigo><span lang=EN-US>.exe</span></span><span
lang=EN-US> extension, while if in a macOS one, the executable model file name
is supposed to have an </span><span class=Cdigo><span lang=EN-US>OSX</span></span><span
lang=EN-US> suffix (without a leading point). The configuration above assumes
that the model executable is in the base LWI folder (</span><span class=Cdigo><span
lang=EN-US>..</span></span><span lang=EN-US>), please adjust if this is not the
case. Also make sure that the model executable can be executed (or is owned) by
the web server default user (for instance, </span><span class=Cdigo><span
lang=EN-US>www-data</span></span><span lang=EN-US> in Ubuntu/Debian), and is
properly set with executable (</span><span class=Cdigo><span lang=EN-US>+x</span></span><span
lang=EN-US>) permissions in macOS and Linux.</span></p>

<p class=MsoNormal><span lang=EN-US>Even if the model was not coded in LSD, LSD
must be used to produce the model configuration (</span><span class=Cdigo><span
lang=EN-US>lwi/lwi.lsd</span></span><span lang=EN-US>) and sensitivity (</span><span
class=Cdigo><span lang=EN-US>lwi/lwi.sa</span></span><span lang=EN-US>) files.
In this case, a dummy (empty) equation file can be used to open the LSD Browser
to create the required files, no coding in LSD is required. Please check LSD
documentation on how to use the LSD Browser to configure the model and to produce
the sensitivity file. Object structure is not required in this case, and it is
ignored if present.</span></p>

<p class=MsoNormal><span lang=EN-US>LWI launches the non-LSD model executable
and passes four command-line arguments to it. The first argument is the
path/name to the CSV configuration file, relative to the current path when the
executable is launched, so the model program can load the selected
configuration values and start the simulation. The configuration file name has
the format </span><span class=Cdigo><span lang=EN-US>run-XXXXXX.csv</span></span><span
lang=EN-US>, where </span><span class=Cdigo><span lang=EN-US>XXXXXX</span></span><span
lang=EN-US> is a variable suffix. The second argument is the default output
path, where the model results file(s) must be saved. The third argument defines
the maximum number of threads per simulation the executable may spawn. The
fourth argument sets the maximum number of MC runs which can be run in
parallel. The model executable must respect those limits.</span></p>

<p class=MsoNormal><span lang=EN-US>If the model outputs a valid formatted
progress bar (see the N&amp;W example for the correct format) to the standard
output (</span><span class=Cdigo><span lang=EN-US>stdout</span></span><span
lang=EN-US>), LWI uses this information (which is also saved to the log file) to
update the </span><span class=Cdigo><span lang=EN-US>Status</span></span><span
lang=EN-US> box in the user web page while the simulation is running. If a
valid progress bar is not detected after one minute of simulation execution, a </span><span
class=Cdigo><span lang=EN-US>no progress info</span></span><span lang=EN-US>
message is shown instead.</span></p>

<p class=MsoNormal><span lang=EN-US>Simulation results file(s) must be saved to
the provided default output path (second argument). The results file(s) base
name must be the same as the configuration file (</span><span class=Cdigo><span
lang=EN-US>run-XXXXXX</span></span><span lang=EN-US>) <i>plus</i> a </span><span
class=Cdigo><span lang=EN-US>_Y.csv</span></span><span lang=EN-US> suffix, as
in </span><span class=Cdigo><span lang=EN-US>run-XXXXXX_Y.csv</span></span><span
lang=EN-US>, where </span><span class=Cdigo><span lang=EN-US>Y</span></span><span
lang=EN-US> is the number of the MC run (</span><span class=Cdigo><span
lang=EN-US>Y = 1</span></span><span lang=EN-US> if there is a single run).</span></p>

<table class=Tabelanormal border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
